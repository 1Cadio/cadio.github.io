<html>
<head>
    <title>Loading..</title>
    <link rel="stylesheet" type="text/css" href="loading.css?3" />
    <script type="text/javascript" src="js/thirdparty/jquery.js"></script>
</head>
<body>

    <div id="background">
        <div id="container">
            <img src='img/gmod_logo_brave.png' class="bounce"/>

            <center>
                <br />
                <div class="walk">:v</div>
            </center>
        </div>

        <div class="server_info">
            <img id="mapimg" src="asset://mapimage/invalid_map"></img>
            <div class="text">
                <span id="serverName">A really long server name will be here that will be too long to fit on the loading screen</span><br>
                <span id="serverMap">gm_hilldirt</span><br>
                <span id="serverGamemode">Snadbox</span>
            </div>
        </div>

        <div id="spambox"></div>

    </div>
    <script type="text/javascript">
        window.onload = function()
        {
            var today = new Date();

            // Force it to dark on Spooktober or when it's late
            var isHalloween = today.getMonth() == 10 && today.getDate() >= 15 || today.getMonth() == 11 && today.getDate() <= 5;
            var darkMode = today.getHours() >= 19 || today.getHours() <= 7;
            var isSupportsSystemDarkMode = navigator.userAgent.match(/Chrome\/(\d+)/)[1] >= 76;
            var systemDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (isHalloween || (isSupportsSystemDarkMode ? systemDarkMode : darkMode)) {
                $("body").addClass("dark");
            }

            // Delay for 3 seconds (3000 milliseconds) and then redirect to home.html
            setTimeout(function() {
                window.location.href = "home.html";
            }, 3000); // 3-second delay
        }

        function GameDetails(servername, serverurl, mapname, maxplayers, steamid, gamemode, volume, lang, gamemodeNice) {
            $("#serverName").text(servername);
            $("#serverMap").text(mapname);
            $("#serverGamemode").text(gamemodeNice);
            $("#mapimg").attr("src", "asset://mapimage/" + mapname);
            $("body").css("background-image", "url('asset://mapimage/" + mapname + "')");

            $(".server_info").addClass("visible");
        }

        function DownloadingFile(file) {
            // File download behavior (currently commented out)
        }

        function SetStatusChanged(status) {
            // Status change behavior (currently commented out)
        }
    </script>

</body>
</html>
